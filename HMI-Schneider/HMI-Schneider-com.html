
<script type="text/html" data-template-name="HMI-Schneider-com">
  <div class="form-group" id="hmi-schneider-com-block">
    <div class="form-row">
      <label for="node-config-input-name"><i class="fa fa-tag"></i>
        <span data-i18n="editor.name"></span></label>
      <input type="text" id="node-config-input-name">
    </div>
    <div class="form-row" hidden>
        <input type="text" id="node-config-input-requiredSet">
    </div>
    <div class="form-row">
        <label for="node-config-input-IPAdd"><span data-i18n="editor.netAddress"></span>
          <span style="color: #ff0000;">*</span></label>
        <input type="text" style="width: 300px" id="node-config-input-IPAdd">
    </div>
    <div class="form-row">
        <label for="node-config-input-TCPPort"><span data-i18n="editor.TCPPort"></span>
          <span style="color: #ff0000;">*</span></label>
        <input type="text" style="width: 300px" id="node-config-input-TCPPort">
    </div>
  </div>
</script>

<script type="text/javascript">

  RED.nodes.registerType('HMI-Schneider-com',{
      category: 'config',
      defaults: {
          name: {value:"SchneiderHMI"},
          IPAdd:{value:"127.0.0.1" },
          TCPPort:{value:"8082" },
          requiredSet: {value: "", required:true},
      },
      label: function() {
          return this.name||this._("HMI-Schneider-com");
      },

      oneditprepare: function() {
      },

      oneditsave: function() {
        var requiredSet = "ready";
        $("#hmi-schneider-com-block").find("input[type='text']").each(function(idx, obj){
          switch($(obj).attr("id")) {
            case "node-config-input-TCPPort":
            case "node-config-input-IPAdd":
              if (!$(obj).val()) requiredSet = "";
              break;
            default:
              break;
          }
        });
      $("#node-config-input-requiredSet").val(requiredSet);
      }
  });

</script>
