<script type="text/x-red" data-template-name="Optex_Rocker_SW">
    <div class="form-row">
        <label for="node-config-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <input type="text" id="node-config-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-row">
        <label for="node-config-input-sensor_id"><i class="fa fa-flag"></i> <span data-i18n="serial.label.sensor_id"></span></label>
        <input type="text" id="node-config-input-sensor_id" data-i18n="serial.label.sensor_id" placeholder="センサーIDを入力します　例) 0500ef1c">
    </div>
    <div class="form-row hidden">
        <input type="text" id="node-config-input-configObject">
    </div>
    <div id="blocks">
        <div class="form-block">
            <div class="form-row">
                <div class="form-inline">
                    <span style="border-bottom:solid 2px;">データ項目 :</span>
                    <input type="text" id="dItem" style="width: 30px;" value="1" disabled="disabled">
                </div>
            </div>
            <table>
              <tr>
                <td>
                  <label><i class="fa fa-tag"></i> <span data-i18n="enoceanDataItem.label.dataname"></span></label>
                </td>
                <td>
                  <input type="text" id="node-config-input-dataname0">
                </td>
              </tr>
            </table>
        </div>
        <div class="form-block">
            <div class="form-row">
                <div class="form-inline">
                    <span style="border-bottom:solid 2px;">データ項目 :</span>
                    <input type="text" id="dItem" style="width: 30px;" value="2" disabled="disabled">
                </div>
            </div>
            <table>
              <tr>
                <td>
                  <label><i class="fa fa-tag"></i> <span data-i18n="enoceanDataItem.label.dataname"></span></label>
                </td>
                <td>
                  <input type="text" id="node-config-input-dataname1">
                </td>
              </tr>
            </table>
        </div>
        <div class="form-block">
            <div class="form-row">
                <div class="form-inline">
                    <span style="border-bottom:solid 2px;">データ項目 :</span>
                    <input type="text" id="dItem" style="width: 30px;" value="3" disabled="disabled">
                </div>
            </div>
            <table>
              <tr>
                <td>
                  <label><i class="fa fa-tag"></i> <span data-i18n="enoceanDataItem.label.dataname"></span></label>
                </td>
                <td>
                  <input type="text" id="node-config-input-dataname2">
                </td>
              </tr>
            </table>
        </div>
        <div class="form-block">
            <div class="form-row">
                <div class="form-inline">
                    <span style="border-bottom:solid 2px;">データ項目 :</span>
                    <input type="text" id="dItem" style="width: 30px;" value="4" disabled="disabled">
                </div>
            </div>
            <table>
              <tr>
                <td>
                  <label><i class="fa fa-tag"></i> <span data-i18n="enoceanDataItem.label.dataname"></span></label>
                </td>
                <td>
                  <input type="text" id="node-config-input-dataname3">
                </td>
              </tr>
            </table>
        </div>
        <div class="form-block">
            <div class="form-row">
                <div class="form-inline">
                    <span style="border-bottom:solid 2px;">データ項目 :</span>
                    <input type="text" id="dItem" style="width: 30px;" value="5" disabled="disabled">
                </div>
            </div>
            <table>
              <tr>
                <td>
                  <label><i class="fa fa-tag"></i> <span data-i18n="enoceanDataItem.label.dataname"></span></label>
                </td>
                <td>
                  <input type="text" id="node-config-input-dataname4">
                </td>
              </tr>
            </table>
        </div>
    </div>
</script>

<script type="text/x-red" data-help-name="Optex_Rocker_SW" charset="utf-8">
    <p>Optex社のロッカースイッチに関する設定をここで行います。</p>
</script>

<script type="text/javascript">
    RED.nodes.registerType('Optex_Rocker_SW',{
        category: 'config',
        defaults: {
            name: {value:"Optex Rocker Switch"},
            // sensor_kind: {value:"u-rd", required:true},
            sensor_id: {value:"", required:true},
            dataname0: {value:"エネルギースイッチ"},
            dataname1: {value:"スイッチ1"},
            dataname2: {value:"スイッチ2"},
            dataname3: {value:"スイッチ3"},
            dataname4: {value:"スイッチ4"},
            configObject: {value:""}
        },
        label: function() {
            return this.name||("Optex Rocker Switch");
        },
        oneditprepare: function() {
        },
        oneditsave: function() {
            var dItems = [];
            for (var i = 0; i < 5; i++) {
                var item ={dataValue: "", unitType: "", dataname: ""};
                //item.unitType = $("#node-config-input-unitType" + String(i)).val();
                item.unitType = null;
                item.dataname = $("#node-config-input-dataname" + String(i)).val();
                dItems[i]=item;
            }
            //フォームの各要素をobjectに記述し、JSON文字列に変換する。
            try {$("#node-config-input-configObject").val(JSON.stringify(dItems));}
            catch(e) {$("#node-config-input-configObject").val("")}
            console.log('val = ' + JSON.stringify(dItems));
        }
    });
</script>

